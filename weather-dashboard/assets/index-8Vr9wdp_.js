(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();const b=void 0,T="https://api.openweathermap.org/data/2.5";function I(a,e={}){const t=new URLSearchParams({...e,appid:b,units:"metric"});return`${T}/${a}?${t}`}async function D(a,e){try{const t={};a&&(t.q=a),e&&(t.lat=e.lat,t.lon=e.lon);const r=I("weather",t),n=I("forecast",{...t,cnt:"40"}),[o,i]=await Promise.all([fetch(r),fetch(n)]);if(!o.ok||!i.ok){const s=await o.text().catch(()=>"Unknown error");throw new Error(`Failed to fetch weather data: ${s}`)}const[c,d]=await Promise.all([o.json(),i.json()]);return{current:c,forecast:d}}catch(t){throw console.error("Error fetching weather data:",t),new Error("Failed to fetch weather data. Please check your connection and try again.")}}function S(a){const e=new Date(a*1e3),t=new Date;return e.toDateString()===t.toDateString()?"Today":e.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}function M(a){try{const{current:e,forecast:t}=a,r=document.getElementById("city"),n=document.getElementById("country"),o=document.getElementById("weather-desc"),i=document.getElementById("weather-icon"),c=document.getElementById("temp-value"),d=document.getElementById("weather-condition"),s=document.getElementById("feels-like"),l=document.getElementById("humidity"),u=document.getElementById("wind-speed"),f=document.getElementById("local-time"),g=document.getElementById("high-temp"),y=document.getElementById("low-temp"),w=document.getElementById("uv-index"),E=document.getElementById("visibility");if(r&&(r.textContent=e.name),n&&(n.textContent=e.sys.country),o&&(o.textContent=e.weather[0].description),i&&e.weather.length>0){const B=e.weather[0].icon;i.src=`https://openweathermap.org/img/wn/${B}@2x.png`,i.alt=e.weather[0].description,i.title=e.weather[0].main,i.className="w-16 h-16 drop-shadow-lg drop-shadow-blue-500"}c&&(c.textContent=Math.round(e.main.temp).toString()),d&&e.weather.length>0&&(d.textContent=e.weather[0].main),s&&(s.textContent=`Feels like ${Math.round(e.main.feels_like).toString()}°C `),l&&(l.textContent=e.main.humidity.toString()),u&&(u.textContent=Math.round(e.wind.speed*3.6).toString()),g&&(g.textContent=`${e.main.temp_max}°C`),y&&(y.textContent=`${e.main.temp_min}°C`),E&&(E.textContent=`${e.visibility}KM`),w&&(w.textContent="N/A");const x=document.getElementById("hourly-forecast-container"),v=document.getElementById("hourly-forecast-date");x&&v&&P(t,x,v);const C=document.getElementById("daily-forecast-container");C&&U(t,C);const $=new Date;f&&(f.textContent=`Last updated: ${$.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`)}catch(e){throw console.error("Error updating UI:",e),new Error("Failed to update weather information")}}function P(a,e,t){try{const r=a.list.slice(0,8),n=new Date;t.textContent=n.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),e.innerHTML="",r.forEach(o=>{const i=new Date(o.dt*1e3),c=document.createElement("div"),d=`https://openweathermap.org/img/wn/${o.weather[0]?.icon}@2x.png`,s=o.weather[0]?.description||"N/A",l=Math.round(o.main.temp);e.appendChild(c),c.outerHTML=`
	<div class="flex flex-col items-center p-3 min-w-[70px] w-[70px] bg-white/50 rounded-lg flex-1 h-fit shadow-sm ring-1 ring-gray-200">
        <div class="text-sm font-medium text-gray-700">${i.getHours()}:00</div>
        <div class="my-1">
          <img
            src="${d}"
            alt="${s}"
            class="w-12 h-12 drop-shadow-sm drop-shadow-blue-500"
            loading="lazy"
            title="${s}"
          >
        </div>
        <div class="font-semibold text-gray-800">${l}°</div>
      </div>`})}catch(r){console.error("Error updating hourly forecast:",r),e.innerHTML='<p class="text-red-500 text-sm">Unable to load hourly forecast</p>'}}function U(a,e){try{const t=a.list.filter((r,n)=>n%8===0);e.innerHTML="",t.forEach((r,n)=>{const o=S(r.dt),i=n===0,c=document.createElement("div");c.className="flex items-center justify-between p-3 bg-white/70 rounded-lg ring-1 ring-gray-200 mb-2 shadow-sm hover:shadow transition";const d=`https://openweathermap.org/img/wn/${r.weather[0]?.icon}.png`,s=r.weather[0]?.description||"N/A",l=Math.round(r.main.temp_max||r.main.temp),u=Math.round(r.main.temp_min||r.main.temp);c.innerHTML=`
        <div class="font-medium text-gray-800 w-24">
          ${i?"Today":o}
        </div>
        <div class="flex items-center flex-1 justify-center">
          <img
            src="${d}"
            alt="${s}"
            class="w-10 h-10 mr-2 drop-shadow-sm drop-shadow-blue-500"
            loading="lazy"
            title="${s}"
          >
          <span class="text-sm text-gray-600 capitalize">${s}</span>
        </div>
        <div class="flex items-center space-x-3">
          <span class="font-semibold text-gray-800">${l}°</span>
          <span class="text-gray-500">${u}°</span>
        </div>
      `,e.appendChild(c)})}catch(t){console.error("Error updating daily forecast:",t),e.innerHTML='<p class="text-red-500 text-sm">Unable to load daily forecast</p>'}}function p(a){try{const e=document.querySelector(".error-notification");e&&e.remove();const t=document.createElement("div");t.className="error-notification fixed top-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 flex items-start max-w-md";const r=document.createElement("span");r.className="mr-2 text-xl",r.innerHTML="⚠️";const n=document.createElement("span");n.className="flex-1",n.textContent=a;const o=document.createElement("button");o.className="ml-4 text-white hover:text-gray-200",o.innerHTML="&times;",o.onclick=()=>t.remove(),t.appendChild(r),t.appendChild(n),t.appendChild(o),document.body.appendChild(t),setTimeout(()=>{document.body.contains(t)&&t.remove()},5e3);const i=c=>{t&&!t.contains(c.target)&&(t.remove(),document.removeEventListener("click",i))};setTimeout(()=>{document.addEventListener("click",i)},0)}catch(e){console.error("Error showing error message:",e),alert(`Error: ${a}`)}}const m=document.querySelector("#searchInput"),k=document.querySelector("#searchButton"),L=document.querySelector("#locationButton");document.addEventListener("DOMContentLoaded",()=>{h("Cairo")});async function h(a,e){if(a&&!a.trim()){p("Please enter a city name");return}try{const t=document.getElementById("temp-value");t&&(t.textContent="...");const r=await D(a,e);M(r)}catch(t){const r=t instanceof Error?t.message:"Failed to fetch weather data";p(r)}}L?.addEventListener("click",async()=>{L&&("geolocation"in navigator?navigator.geolocation.getCurrentPosition(a=>{h(void 0,{lon:`${a.coords.longitude}`,lat:`${a.coords.latitude}`})}):p("Geolocarion API not available"))});k?.addEventListener("click",()=>{m?.value&&h(m.value)});m?.addEventListener("keypress",a=>{a.key==="Enter"&&m.value&&h(m.value)});
